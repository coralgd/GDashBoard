<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>
<link rel="stylesheet" href="hud.css">
</head>
<body>

<div class="hud" style="max-width:400px;margin:80px auto;">
<h1>Вход</h1>
<input id="email" placeholder="Email"><br><br>
<input id="password" type="password" placeholder="Password"><br><br>
<button id="login">Войти</button>
<button id="register">Регистрация</button>
</div>

<script type="module">
import { auth, db } from './firebase.js';
import { signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

login.onclick=()=>signInWithEmailAndPassword(auth,email.value,password.value)
.then(()=>location.href='nick.html');

register.onclick=()=>createUserWithEmailAndPassword(auth,email.value,password.value)
.then(u=>setDoc(doc(db,'users',u.user.uid),{
  role:'player',
  points:0,
  situation:'not requested'
})).then(()=>location.href='nick.html');
</script>
</body>
</html>
